<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruler CSS</title>
    <link rel="stylesheet" href="ruler.css">
</head>
<body>
    <h1>Sonar Sensor Data Visualizer</h1>
    <div class="box">
        <div class="num-value">Input: 180</div>

        <div class="bar">
            <div class="color-bg">
                <div class="ruler-value"></div>
                <div class="ruler-hidden"></div>
            </div>
        </div>

        <div class="ruler">
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick">
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
                <div class="small-tick"></div>
            </div>
            <div class="big-tick"></div>
        </div>
    </div>

    <div class="manual">
        <input type="number" id="value">
        <input type="submit" value="Read" id="input">
    </div>

    <script>
        function setRulerValue(num) {
            console.log('Input', num);
            let ruler = document.querySelector('.ruler-value');
            let hidden = document.querySelector('.ruler-hidden');
            let text = document.querySelector('.num-value');

            if(num === NaN){
                ruler.style.width = '0%';
                text.innerHTML = "Not a number";
            }
            else{
                if (num >= 360){
                    num = 360;
                }
                else if (num <= 0){
                    num = 0;
                }
                let value = ((num/360)*100);
                ruler.style.width = value + "%";
                hidden.style.width = (100 - value) + "%";
                text.innerHTML = "Input: " + num;
            }
        }

        document.querySelector('#input').addEventListener('click', function(){
            let newValue = document.querySelector('#value').value;
            //setRulerValue(num);
            let ruler = document.querySelector('.ruler-value');
            let text = document.querySelector('.num-value');
            
            let currValue = ruler.clientWidth;
            // let delayAmount = 1000;

            // console.log('Current Value', currValue);
            // console.log('New Value', newValue);

            // if (currValue <= newValue) {
            //     for (var i=currValue; i<=newValue; i+=5) {
            //         setTimeout(() => {
            //             setRulerValue(i);
            //         }, delayAmount);
            //     }
            // }
            // else{
            //     for (var i=currValue; i>=newValue; i-=5) {
            //         setTimeout(() => {
            //             setRulerValue(i);
            //         }, delayAmount);
            //     }
            // }

            // let difference = Math.abs(currValue - newValue);
            // ruler.style.transitionDelay = ((2.5/360)*difference) +"s";
            setRulerValue(newValue);
        })
    </script>
</body>
</html>